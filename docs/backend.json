
{
  "entities": {
    "UserProfile": {
      "title": "UserProfile",
      "type": "object",
      "description": "Perfil detallado de usuario (alumno, profesor o admin).",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "email": { "type": "string", "format": "email" },
        "role": { "type": "string", "enum": ["student", "teacher", "admin"] },
        "username": { "type": "string" },
        "phone": { "type": "string" },
        "instruments": { "type": "array", "items": { "type": "string" } },
        "avatarSeed": { "type": "string" },
        "photoUrl": { "type": "string" },
        "photoTransform": {
          "type": "object",
          "properties": {
            "scale": { "type": "number" },
            "x": { "type": "number" },
            "y": { "type": "number" }
          }
        },
        "fcmToken": { "type": "string", "description": "Token para notificaciones push (FCM)." },
        "canManageLibrary": { "type": "boolean", "description": "Si el profesor tiene permiso para crear/editar materiales." }
      },
      "required": ["id", "name", "email", "role"]
    },
    "DayAvailability": {
      "title": "DayAvailability",
      "type": "object",
      "description": "Horarios y reservas por profesor y fecha.",
      "properties": {
        "teacherId": { "type": "string" },
        "date": { "type": "string" },
        "slots": { "type": "array", "items": { "type": "object" } }
      }
    },
    "ResourceCompletion": {
      "title": "ResourceCompletion",
      "type": "object",
      "description": "Registro de materiales validados como completados.",
      "properties": {
        "resourceId": { "type": "number" },
        "studentId": { "type": "string" },
        "isCompleted": { "type": "boolean" },
        "validatedBy": { "type": "string" },
        "date": { "type": "string" }
      }
    },
    "AppNotification": {
      "title": "AppNotification",
      "type": "object",
      "description": "Notificaciones internas del sistema.",
      "properties": {
        "id": { "type": "string" },
        "recipientId": { "type": "string" },
        "title": { "type": "string" },
        "body": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "read": { "type": "boolean" },
        "type": { "type": "string" }
      }
    },
    "UserMilestone": {
      "title": "UserMilestone",
      "type": "object",
      "description": "Logros históricos asignados a los alumnos.",
      "properties": {
        "id": { "type": "string" },
        "studentId": { "type": "string" },
        "milestoneTitle": { "type": "string" },
        "achieved": { "type": "boolean" },
        "date": { "type": "string" }
      }
    },
    "StudentSkill": {
      "title": "StudentSkill",
      "type": "object",
      "description": "Nivel técnico porcentual del alumno.",
      "properties": {
        "studentId": { "type": "string" },
        "instrument": { "type": "string" },
        "skillName": { "type": "string" },
        "level": { "type": "number" }
      }
    },
    "MusicResource": {
      "title": "MusicResource",
      "type": "object",
      "description": "Material didáctico de la biblioteca.",
      "properties": {
        "id": { "type": "number" },
        "title": { "type": "string" },
        "category": { "type": "string" },
        "type": { "type": "string" },
        "length": { "type": "string" },
        "downloadUrl": { "type": "string" },
        "interactUrl": { "type": "string" },
        "img": { "type": "object" },
        "isVisibleGlobally": { "type": "boolean", "description": "Si el material es visible para todos por defecto." },
        "isEnabled": { "type": "boolean", "description": "Si el material está habilitado para su uso." },
        "assignedStudentIds": { "type": "array", "items": { "type": "string" }, "description": "IDs de alumnos específicos que pueden ver este material si no es global." }
      }
    },
    "AppSetting": {
      "title": "AppSetting",
      "type": "object",
      "description": "Configuración global de identidad y canales.",
      "properties": {
        "appLogoUrl": { "type": "string" },
        "darkMode": { "type": "boolean" },
        "whatsappNumber": { "type": "string" },
        "description": { "type": "string" },
        "showProduction": { "type": "boolean" },
        "enableProduction": { "type": "boolean" },
        "showRewards": { "type": "boolean" },
        "enableRewards": { "type": "boolean" },
        "showMarket": { "type": "boolean" },
        "enableMarket": { "type": "boolean" },
        "showPostulations": { "type": "boolean" },
        "enablePostulations": { "type": "boolean" }
      }
    }
  },
  "auth": {
    "providers": ["password", "google.com"]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/backend/entities/UserProfile" },
      "description": "Almacén de perfiles de usuario."
    },
    "/availabilities/{availId}": {
      "schema": { "$ref": "#/backend/entities/DayAvailability" },
      "description": "Gestión de agenda y reservas de clases."
    },
    "/completions/{compId}": {
      "schema": { "$ref": "#/backend/entities/ResourceCompletion" },
      "description": "Seguimiento de materiales completados."
    },
    "/notifications/{notifId}": {
      "schema": { "$ref": "#/backend/entities/AppNotification" },
      "description": "Historial de notificaciones de usuario."
    },
    "/milestones/{mileId}": {
      "schema": { "$ref": "#/backend/entities/UserMilestone" },
      "description": "Registro de hitos y medallas."
    },
    "/skills/{skillId}": {
      "schema": { "$ref": "#/backend/entities/StudentSkill" },
      "description": "Niveles de habilidad por instrumento."
    },
    "/resources/{resId}": {
      "schema": { "$ref": "#/backend/entities/MusicResource" },
      "description": "Catálogo de contenidos de la academia."
    },
    "/settings/{docId}": {
      "schema": { "$ref": "#/backend/entities/AppSetting" },
      "description": "Ajustes de sistema y biblioteca."
    }
  }
}
